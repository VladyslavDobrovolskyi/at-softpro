# üì∞ –¢–µ—Å—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Ä–æ–∑—Å–∏–ª–∫—É (Email)

**–§–∞–π–ª —Ç–µ—Å—Ç—ñ–≤:** `newsletter-email.spec.ts`

---

## üîç –û–≥–ª—è–¥

–¢–µ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É –ø–æ–ª—è `–í–∞—à–∞ –ø–æ—à—Ç–∞` —Ç–∞ –ø–æ–≤‚Äô—è–∑–∞–Ω–æ—ó –∫–Ω–æ–ø–∫–∏ –ø—ñ–¥–ø–∏—Å–∫–∏ `–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é` –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ https://softpro.ua/uk.
–ú–µ—Ç–∞: –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –≤–∞–ª—ñ–¥–Ω—ñ email –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è (–∫–ª—ñ—î–Ω—Ç —Ä–æ–±–∏—Ç—å POST-–∑–∞–ø–∏—Ç –Ω–∞ `/api/cms-subscribtion`), –∞ —è–≤–Ω–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ ‚Äî –±–ª–æ–∫—É—é—Ç—å—Å—è –±–µ–∑ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É —ñ –±–µ–∑ –ø–∞–¥—ñ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

> –ü—Ä–∏–º—ñ—Ç–∫–∞: —É –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ endpoint –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ 404; —Ç–µ—Å—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å —Ñ–∞–∫—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É —Ç–∞ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å —Ç—ñ–ª–∞ (–Ω–µ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ —É—Å–ø—ñ—à–Ω–æ–≥–æ HTTP-–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ).

---

## ‚úÖ –ü–æ–∑–∏—Ç–∏–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó ‚Äî –≤–∞–ª—ñ–¥–Ω—ñ –∞–¥—Ä–µ—Å–∏

**–¢–µ—Å—Ç:** `accepts commonly valid email addresses and sends request` ‚úÖ

- –ú–µ—Ç–∞: –¥–ª—è –∫–æ–∂–Ω–æ—ó –≤–∞–ª—ñ–¥–Ω–æ—ó –∞–¥—Ä–µ—Å–∏ –∫–ª—ñ—î–Ω—Ç –º–∞—î —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ POST –Ω–∞ `/api/cms-subscribtion` –∑ email —É —Ç—ñ–ª—ñ –∑–∞–ø–∏—Ç—É.
- –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞: –≤—ñ–¥–∫—Ä–∏—Ç–∏ `https://softpro.ua/uk` —Ç–∞ –∑–Ω–∞–π—Ç–∏ –∫–Ω–æ–ø–∫—É `–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é`, –Ω–∞–π–±–ª–∏–∂—á—É –¥–æ –ø–æ–ª—è `–í–∞—à–∞ –ø–æ—à—Ç–∞`.
- –î–∞–Ω—ñ (–ø—Ä–∏–∫–ª–∞–¥–∏):
    - `test@example.com`
    - `first.last@example.com`
    - `test-mail@example.com`
    - `user123@example.com`
    - `user+extra@gmail.com`
    - `admin@startup.agency`
    - `info@my.long.domain.name`
    - `support@tech.io`
    - `postmaster@[123.123.123.123]`
- –ö—Ä–æ–∫–∏:
    1. –û—á–∏—Å—Ç–∏—Ç–∏ –ø–æ–ª–µ `–í–∞—à–∞ –ø–æ—à—Ç–∞`.
    2. –í—Å—Ç–∞–≤–∏—Ç–∏ email —ñ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –∫–Ω–æ–ø–∫—É.
    3. –û—á—ñ–∫—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç `POST /api/cms-subscribtion` (—Ç–∞–π–º–∞—É—Ç ‚âà 2‚Äì3 —Å).
- –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∑–∞–ø–∏—Ç –±—É–≤ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏–π; —É —Ç—ñ–ª—ñ –∑–∞–ø–∏—Ç—É –ø—Ä–∏—Å—É—Ç–Ω—ñ–π –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π email.

---

## ‚ùå –ù–µ–≥–∞—Ç–∏–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó ‚Äî –ø–æ–º–∏–ª–∫–∏ —Ñ–æ—Ä–º–∞—Ç—É

**–¢–µ—Å—Ç:** `blocks clearly invalid emails (no network request)` ‚ùå

- –ú–µ—Ç–∞: –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–ø–∏—Ç –¥–ª—è –Ω–∞–≤–º–∏—Å–Ω–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏—Ö –∞–¥—Ä–µ—Å.
- –ü—Ä–∏–∫–ª–∞–¥–∏ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏—Ö –∞–¥—Ä–µ—Å:
    - –ü–æ—Ä–æ–∂–Ω—î –ø–æ–ª–µ: `''`
    - –ë–µ–∑ `@`: `plainaddress.com`
    - –ë–µ–∑ –¥–æ–º–µ–Ω—É: `test@` –∞–±–æ `test@.com`
    - –ë–µ–∑ —ñ–º–µ–Ω—ñ: `@example.com`
    - –î–≤—ñ `@`: `test@@example.com`
    - –ü—Ä–æ–±—ñ–ª–∏: `' test@example.com'`, `test @example.com`
    - –°–ø–µ—Ü—Å–∏–º–≤–æ–ª–∏ –≤ –¥–æ–º–µ–Ω—ñ: `test@ex#mple.com`
    - –ö—Ä–∞–ø–∫–∞ –Ω–∞ –ø–æ—á–∞—Ç–∫—É/–∫—ñ–Ω–µ—Ü—å/–¥–≤—ñ –ø—ñ–¥—Ä—è–¥: `.test@example.com`, `test@example.com..`, `test..user@example.com`
- –ö—Ä–æ–∫–∏:
    1. –í—Å—Ç–∞–≤–∏—Ç–∏ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π email.
    2. –í–∏–∫–ª–∏–∫–∞—Ç–∏ `checkValidity()` –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç—ñ (HTML5) –∞–±–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –∫–Ω–æ–ø–∫—É.
- –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —è–∫—â–æ `checkValidity()` –ø–æ–≤–µ—Ä—Ç–∞—î `false` ‚Äî –∑–∞–ø–∏—Ç –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è; —è–∫—â–æ –±—Ä–∞—É–∑–µ—Ä –≤–≤–∞–∂–∞—î –∞–¥—Ä–µ—Å—É –≤–∞–ª—ñ–¥–Ω–æ—é ‚Äî –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –≤—Å–µ –æ–¥–Ω–æ –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–∞–ø–∏—Ç –≤ –º–µ–∂–∞—Ö –∫–æ—Ä–æ—Ç–∫–æ–≥–æ —Ç–∞–π–º–∞—É—Ç—É (‚âà800 ms).

---

## ‚öñÔ∏è –ì—Ä–∞–Ω–∏—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —ñ –ª—ñ–º—ñ—Ç–∏

**–¢–µ—Å—Ç:** `boundary checks: maxlength and local-part limits` ‚öñÔ∏è

- –ú–µ—Ç–∞: –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É –¥–ª—è –≥—Ä–∞–Ω–∏—á–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤ –∑–≥—ñ–¥–Ω–æ —ñ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º RFC.
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏:
    - –õ–æ–∫–∞–ª—å–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ (–¥–æ `@`) —Ä—ñ–≤–Ω–æ 64 —Å–∏–º–≤–æ–ª–∏ ‚Äî –∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –¥–æ–∑–≤–æ–ª–µ–Ω–∞.
    - –õ–æ–∫–∞–ª—å–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ 65 —Å–∏–º–≤–æ–ª—ñ–≤ ‚Äî –¥–µ—è–∫—ñ –±—Ä–∞—É–∑–µ—Ä–∏ –Ω–µ –∑–∞–±–æ—Ä–æ–Ω—è—é—Ç—å; —Ç–µ—Å—Ç –≤–ø–µ–≤–Ω—é—î—Ç—å—Å—è, —â–æ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–µ –ø–∞–¥–∞—î (–∞–±–æ –∑–∞–ø–∏—Ç –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è, –∞–±–æ –∞–¥—Ä–µ—Å–∞ –±–ª–æ–∫—É—î—Ç—å—Å—è).
    - –ó–∞–≥–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ > 254 —Å–∏–º–≤–æ–ª—ñ–≤ ‚Äî –º–∞—î –≤–≤–∞–∂–∞—Ç–∏—Å—è –Ω–µ–≤–∞–ª—ñ–¥–Ω–æ—é.
- –ö—Ä–æ–∫–∏: –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ `checkValidity()` —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å/–Ω–∞—è–≤–Ω—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—É.

---

## üåç –Ü–Ω—Ç–µ—Ä–Ω–∞—Ü—ñ–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è —ñ —Å–∫–ª–∞–¥–Ω—ñ –∫–µ–π—Å–∏

**–¢–µ—Å—Ç:** `international and special cases ‚Äî site should not crash` üåç

- –ú–µ—Ç–∞: –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —Ä—ñ–¥–∫—ñ—Å–Ω—ñ –∞–±–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –Ω–µ –ø—Ä–∏–∑–≤–æ–¥—è—Ç—å –¥–æ –ø–∞–¥—ñ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (500) –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ.
- –ü—Ä–∏–∫–ª–∞–¥–∏:
    - `—è–Ω–¥–µ–∫—Å-—Ç–µ—Å—Ç@–ø–æ—á—Ç–∞.—Ä—Ñ` (–∫–∏—Ä–∏–ª–∏—Ü—è / Punycode)
    - –°–∫–ª–∞–¥–Ω—ñ –∫–∞–≤–∏—á–Ω—ñ –ª–æ–∫–∞–ª—å–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ (—Ñ–æ—Ä–º–∞–ª—å–Ω–æ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∞–ª—ñ–¥–Ω–∏–º–∏ –∑–≥—ñ–¥–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É)
- –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ø—ñ—Å–ª—è —Å–ø—Ä–æ–±–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ **–Ω–µ–º–∞—î** —Ç–µ–∫—Å—Ç—É `500` –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–º—ñ—Ç–Ω—ñ —Å–µ—Ä–≤–µ—Ä–Ω—ñ –ø–æ–º–∏–ª–∫–∏ –≤ UI.

---

## üìã –®–≤–∏–¥–∫–∞ —Ç–∞–±–ª–∏—Ü—è –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

| –ö–∞—Ç–µ–≥–æ—Ä—ñ—è         |                                         Email –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ | –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç                                |
| ----------------- | --------------------------------------------------------: | --------------------------------------------------- |
| –í–∞–ª—ñ–¥–Ω–∏–π          |                                      `simple@example.com` | ‚úÖ –£—Å–ø—ñ—Ö (–∑–∞–ø–∏—Ç –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ)                          |
| –í–∞–ª—ñ–¥–Ω–∏–π (Plus)   |                                    `dev+test1@google.com` | ‚úÖ –£—Å–ø—ñ—Ö                                            |
| –í–∞–ª—ñ–¥–Ω–∏–π (–î–æ–≤–≥–∏–π) | `a.very.long.address.for.testing.purposes@sub.domain.com` | ‚úÖ –£—Å–ø—ñ—Ö                                            |
| –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π        |                                            `not-an-email` | ‚ùå –ü–æ–º–∏–ª–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É (–Ω–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏)                   |
| –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π        |                                       `test@example..com` | ‚ùå –ü–æ–º–∏–ª–∫–∞ (–¥–≤—ñ –∫—Ä–∞–ø–∫–∏)                             |
| –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π        |                                               `test@.com` | ‚ùå –ü–æ–º–∏–ª–∫–∞ (–Ω–µ–º–∞—î –¥–æ–º–µ–Ω—É)                           |
| XSS/SQLi          |                      `<script>alert(1)</script>@test.com` | ‚ùå –ü–æ–º–∏–ª–∫–∞/–ï–∫—Ä–∞–Ω—ñ–∑–∞—Ü—ñ—è (–Ω–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏, –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏) |
| Unicode           |                                    `—è–Ω–¥–µ–∫—Å-—Ç–µ—Å—Ç@–ø–æ—á—Ç–∞.—Ä—Ñ` | ‚ö†Ô∏è –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –≤–∏–º–æ–≥ (–≥–æ–ª–æ–≤–Ω–µ ‚Äî –Ω–µ –ø–∞–¥–∞—Ç–∏)         |

---

## üìù –î–æ–¥–∞—Ç–∫–æ–≤–æ / –ü—Ä–∏–º—ñ—Ç–∫–∏

- –ü–æ—Ç–æ—á–Ω–∏–π —Ç–µ—Å—Ç –Ω–µ –º–æ–∫-—Ç–∞–π—Ç—å —Å–µ—Ä–≤–µ—Ä; –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ –≤ CI —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∑–∞–º–æ–∫–∞—Ç–∏ `POST /api/cms-subscribtion` —ñ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω—ñ —Å—Ç–∞—Ç—É—Å–∏ (200/400/500) –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–µ–∞–∫—Ü—ñ—ó –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –Ω–∞ —Ä—ñ–∑–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç—É:

```bash
npx playwright test newsletter-email.spec.ts
```

- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: –≤–∏–Ω–µ—Å—Ç–∏ –Ω–∞–±–æ—Ä–∏ –≤–∞–ª—ñ–¥–Ω–∏—Ö/–Ω–µ–≤–∞–ª—ñ–¥–Ω–∏—Ö email —É fixtures –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `test.describe.serial`, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ä—è–¥–∫—É.

---

–ê–≤—Ç–æ—Ä: Vladyslav Dobrovolksyi (Powered by AI)
–î–∞—Ç–∞: 02.02.2026
